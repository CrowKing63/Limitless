<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0f1220" />
    <title>Limitless Survivor (A11y Web Game)</title>
  </head>
  <body>
    <div id="app" aria-live="polite"></div>

    <!-- Settings Panel (used as sidebar in practice-mode) -->
    <div id="settings-overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="settings-title" aria-hidden="true">
      <div class="overlay-card">
        <header class="settings-header">
          <div>
            <p class="eyebrow">Accessibility suite</p>
            <h2 id="settings-title">Settings</h2>
            <p class="subtitle">게임을 나에게 맞추세요. 모든 변경 사항은 즉시 저장되고 적용됩니다.</p>
          </div>
          <div class="header-actions" id="settings-toolbar">
            <button id="btn-adv" type="button" class="secondary" aria-pressed="false" aria-expanded="false">Show Advanced ▾</button>
          </div>
        </header>

        <p id="settings-status" class="status-message" role="status" aria-live="polite"></p>

        <section class="panel quick">
          <h3>Quick presets</h3>
          <p class="note">원하는 플레이 감각을 빠르게 적용해 보세요. 필요하면 언제든지 세부 옵션으로 조정할 수 있습니다.</p>
          <div class="preset-grid">
            <button id="btn-preset-vision" type="button" class="chip">Vision clarity</button>
            <button id="btn-preset-motor" type="button" class="chip">Easy input</button>
            <button id="btn-preset-focus" type="button" class="chip">Calm pacing</button>
          </div>
          <button id="btn-preset-reset" type="button" class="tertiary">Reset to default values</button>
        </section>

        <section class="panel" aria-labelledby="input-heading">
          <h3 id="input-heading">Input &amp; interaction</h3>
          <fieldset role="radiogroup" aria-describedby="move-note">
            <legend>Movement style</legend>
            <p class="note" id="move-note">Click-to-Move는 한 번 클릭으로 이동하고, Pointer-Follow는 포인터 거리/방향에 따라 속도가 달라집니다.</p>
            <label><input type="radio" name="moveMode" value="click" /> Click-to-Move</label>
            <label><input type="radio" name="moveMode" value="follow" /> Pointer-Follow</label>
          </fieldset>

          <div class="control" data-advanced>
            <div class="control-header">
              <label for="rng-arrive">Arrival radius</label>
              <output id="val-arrive" for="rng-arrive">8 px</output>
            </div>
            <input id="rng-arrive" type="range" min="4" max="24" value="8" aria-describedby="arrive-note" />
            <p class="note" id="arrive-note">목표 지점에 얼마나 가까워지면 멈출지 결정합니다.</p>
          </div>

          <div class="advanced-group" data-advanced>
            <h4>Pointer follow tuning</h4>
            <div class="control">
              <div class="control-header">
                <label for="rng-deadzone">Follow dead-zone</label>
                <output id="val-deadzone" for="rng-deadzone">16 px</output>
              </div>
              <input id="rng-deadzone" type="range" min="0" max="48" value="16" aria-describedby="deadzone-note" />
              <p class="note" id="deadzone-note">포인터와 너무 가까우면 움직이지 않도록 하는 안전 거리입니다.</p>
            </div>
            <div class="control">
              <div class="control-header">
                <label for="rng-gain">Follow speed gain</label>
                <output id="val-gain" for="rng-gain">1.00×</output>
              </div>
              <input id="rng-gain" type="range" min="50" max="200" step="5" value="100" aria-describedby="gain-note" />
              <p class="note" id="gain-note">포인터와의 거리가 늘어날 때 속도가 얼마나 빠르게 증가할지 결정합니다.</p>
            </div>
            <div class="control">
              <div class="control-header">
                <label for="rng-maxdist">Follow max distance</label>
                <output id="val-maxdist" for="rng-maxdist">240 px</output>
              </div>
              <input id="rng-maxdist" type="range" min="80" max="600" step="20" value="240" aria-describedby="maxdist-note" />
              <p class="note" id="maxdist-note">이 거리에 도달하면 최대 속도가 적용됩니다.</p>
            </div>
            <div class="control">
              <div class="control-header">
                <label for="rng-curve">Follow responsiveness</label>
                <output id="val-curve" for="rng-curve">1.00×</output>
              </div>
              <input id="rng-curve" type="range" min="50" max="200" step="5" value="100" aria-describedby="curve-note" />
              <p class="note" id="curve-note">속도 곡선: 포인터가 멀어질 때 속도가 얼마나 급격히 증가할지 조정합니다.</p>
            </div>
          </div>

          <div class="control" data-advanced>
            <label><input type="checkbox" id="chk-dwell" /> Dwell to activate</label>
            <p class="note">커서를 올려두면 지정 시간 후 자동으로 클릭합니다.</p>
          </div>
          <div class="control" data-advanced>
            <div class="control-header">
              <label for="rng-dwell">Dwell time</label>
              <output id="val-dwell" for="rng-dwell">0.9 s</output>
            </div>
            <input id="rng-dwell" type="range" min="500" max="2000" step="100" value="900" aria-describedby="dwell-note" />
            <p class="note" id="dwell-note">자동 클릭이 발동하기까지 기다리는 시간입니다.</p>
          </div>

          <div class="control">
            <label><input type="checkbox" id="chk-scan" /> One-switch scan mode</label>
            <p class="note">선택지가 자동으로 순환하며 스페이스/엔터로 선택합니다.</p>
          </div>
          <div class="control" data-advanced>
            <div class="control-header">
              <label for="rng-scan">Scan speed</label>
              <output id="val-scan" for="rng-scan">1.2 s</output>
            </div>
            <input id="rng-scan" type="range" min="600" max="2400" step="100" value="1200" aria-describedby="scan-note" />
            <p class="note" id="scan-note">선택 포커스가 다음 항목으로 이동하는 간격입니다.</p>
          </div>

          <div class="control" data-advanced>
            <label><input type="checkbox" id="chk-face" /> Face gestures (beta)</label>
            <p class="note">좌/우/상/하로 얼굴을 기울여 1회성 이동 명령을 실행합니다.</p>
          </div>
          <div class="advanced-group" data-advanced>
            <h4>Face gesture tuning</h4>
            <div class="control">
              <div class="control-header">
                <label for="rng-tilt">Tilt sensitivity</label>
                <output id="val-tilt" for="rng-tilt">0.06</output>
              </div>
              <input id="rng-tilt" type="range" min="40" max="100" step="2" value="60" aria-describedby="tilt-note" />
              <p class="note" id="tilt-note">얼굴을 얼마나 기울여야 명령으로 인식할지 정합니다.</p>
            </div>
            <div class="control">
              <div class="control-header">
                <label for="rng-nudge">Nudge distance</label>
                <output id="val-nudge" for="rng-nudge">160 px</output>
              </div>
              <input id="rng-nudge" type="range" min="80" max="320" step="10" value="160" aria-describedby="nudge-note" />
              <p class="note" id="nudge-note">한 번의 제스처로 이동할 거리입니다.</p>
            </div>
            <div class="control">
              <div class="control-header">
                <label for="rng-repeat">Nudge repeat</label>
                <output id="val-repeat" for="rng-repeat">0.3 s</output>
              </div>
              <input id="rng-repeat" type="range" min="200" max="600" step="20" value="300" aria-describedby="repeat-note" />
              <p class="note" id="repeat-note">제스처가 유지될 때 반복 실행되는 간격입니다.</p>
            </div>
          </div>

          <div data-practice-only class="row end">
            <button id="btn-start-run" class="primary">Start Run ▶</button>
          </div>
        </section>

        <section class="panel" aria-labelledby="visual-heading">
          <h3 id="visual-heading">Visual clarity</h3>
          <div class="control">
            <label><input type="checkbox" id="chk-contrast" /> High-contrast theme</label>
            <p class="note">텍스트와 UI의 대비를 높여 가독성을 향상합니다.</p>
          </div>
          <div class="control">
            <div class="control-header">
              <label for="rng-text">Text size</label>
              <output id="val-text" for="rng-text">100%</output>
            </div>
            <input id="rng-text" type="range" min="90" max="150" value="100" aria-describedby="text-note" />
            <p class="note" id="text-note">인터페이스 글자의 전체 크기를 조절합니다.</p>
          </div>
          <div class="control" data-advanced>
            <label for="sel-palette">Palette</label>
            <select id="sel-palette">
              <option value="default">Default</option>
              <option value="high">High-visibility</option>
              <option value="mono">Grayscale</option>
            </select>
            <p class="note">게임 월드의 색상을 바꾸어 대비를 맞춥니다.</p>
          </div>
          <div class="control" data-advanced>
            <label><input type="checkbox" id="chk-bulletbold" /> High-visibility projectiles</label>
            <p class="note">투사체 외곽선을 강조하여 화면에서 더욱 쉽게 볼 수 있습니다.</p>
          </div>
        </section>

        <section class="panel" aria-labelledby="feedback-heading">
          <h3 id="feedback-heading">Feedback &amp; comfort</h3>
          <div class="control" data-advanced>
            <div class="control-header">
              <label for="rng-tele">Telegraph duration</label>
              <output id="val-tele" for="rng-tele">0.20 s</output>
            </div>
            <input id="rng-tele" type="range" min="80" max="400" step="20" value="200" aria-describedby="tele-note" />
            <p class="note" id="tele-note">적 공격이 표시되는 시간을 늘리거나 줄입니다.</p>
          </div>
          <div class="control" data-advanced>
            <label><input type="checkbox" id="chk-telebold" /> Extra contrast telegraph</label>
            <p class="note">적 공격 예고선을 두껍고 선명하게 표시합니다.</p>
          </div>
          <div class="control" data-advanced>
            <label><input type="checkbox" id="chk-shake" /> Screen shake</label>
            <p class="note">화면 흔들림 효과로 타격감을 주지만, 멀미가 있다면 끄세요.</p>
          </div>
        </section>

        <section class="panel" aria-labelledby="difficulty-heading">
          <h3 id="difficulty-heading">Difficulty</h3>
          <fieldset role="radiogroup" aria-describedby="difficulty-note">
            <legend>Challenge level</legend>
            <p class="note" id="difficulty-note">원하는 페이스에 맞춰 적 강도와 생존 시간을 조절합니다.</p>
            <label><input type="radio" name="difficulty" value="relaxed" /> Relaxed</label>
            <label><input type="radio" name="difficulty" value="standard" /> Standard</label>
            <label><input type="radio" name="difficulty" value="intense" /> Intense</label>
          </fieldset>
        </section>

        <footer class="settings-footer row end">
          <button id="btn-close-settings" type="button" class="secondary">Close</button>
        </footer>
      </div>
    </div>

    <!-- Level Up Overlay (disabled in practice mode) -->
    <div id="levelup-overlay" class="overlay levelup" role="dialog" aria-modal="true" aria-labelledby="lvlup-title" aria-hidden="true">
      <div class="overlay-card">
        <h2 id="lvlup-title">Level Up</h2>
        <p>Choose an upgrade:</p>
        <div id="lvlup-choices" class="choices" role="listbox" aria-label="Upgrades">
          <button role="option" data-choice="1">+20% Attack Rate (1)</button>
          <button role="option" data-choice="2">+1 Projectile (2)</button>
          <button role="option" data-choice="3">+10% Move Speed (3)</button>
        </div>
      </div>
    </div>

    <!-- Run Complete Overlay -->
    <div id="runover-overlay" class="overlay runover" role="dialog" aria-modal="true" aria-labelledby="runover-title" aria-hidden="true">
      <div class="overlay-card">
        <h2 id="runover-title">Run Complete</h2>
        <p id="runover-summary">Summary</p>
        
        <div id="stage-rewards" class="choices" aria-label="Stage rewards" aria-hidden="true">
          <button id="reward-magnet" data-reward="magnet">XP Magnet</button>
          <button id="reward-blast" data-reward="blast">Wide Blast</button>
        </div>
        <div class="row">
          <button id="btn-next-stage" class="primary" data-scan>Next Stage</button>
          <button id="btn-retry" class="secondary" data-scan>Retry</button>
          <button id="btn-menu" class="secondary" data-scan>Menu</button>
        </div>
      </div>
    </div>

    <!-- Pause Overlay -->
    <div id="pause-overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="pause-title" aria-hidden="true">
      <div class="overlay-card">
        <h2 id="pause-title">Paused</h2>
        <div class="row">
          <button id="btn-resume" class="primary" data-scan>Resume</button>
          <button id="btn-quit" class="secondary" data-scan>Quit to Menu</button>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
