<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0f1220" />
    <title>Limitless Survivor (A11y Web Game)</title>
  </head>
  <body>
    <div id="app" aria-live="polite"></div>

    <!-- Settings Panel (used as sidebar in practice-mode) -->
    <div id="settings-overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="settings-title" aria-hidden="true">
      <div class="overlay-card">
        <h2 id="settings-title">Settings</h2>
        <div class="row end" id="settings-toolbar">
          <button id="btn-adv" class="secondary" aria-pressed="false">Show Advanced ▾</button>
        </div>
        <section>
          <h3>Movement Mode</h3>
          <div role="radiogroup" aria-label="Movement mode">
            <label><input type="radio" name="moveMode" value="click" checked /> Click‑to‑Move</label>
            <label><input type="radio" name="moveMode" value="follow" /> Pointer‑Follow</label>
          </div>
          <p class="note">Click‑to‑Move: 한 번 클릭으로 목적지까지 이동합니다. Pointer‑Follow: 포인터와의 거리/방향에 따라 속도가 달라집니다.</p>
          <div class="row">
            <label for="rng-arrive">Arrival radius</label>
            <input id="rng-arrive" type="range" min="4" max="24" value="8" />
          </div>
          <p class="note">도착 반경: 목표 지점에 얼마나 가까워지면 멈출지 결정합니다.</p>
          <div class="row">
            <label for="rng-deadzone">Follow dead‑zone</label>
            <input id="rng-deadzone" type="range" min="0" max="48" value="16" />
          </div>
          <p class="note">데드존: 포인터와 너무 가까우면 움직이지 않습니다.</p>
          <div class="row">
            <label for="rng-gain">Follow speed gain</label>
            <input id="rng-gain" type="range" min="50" max="200" step="5" value="100" />
          </div>
          <p class="note">속도 게인: 포인터와의 거리에 따른 속도 배율입니다.</p>
          <div class="row">
            <label for="rng-maxdist">Follow max distance</label>
            <input id="rng-maxdist" type="range" min="80" max="600" step="20" value="240" />
          </div>
          <div class="row">
            <label for="rng-curve">Follow responsiveness</label>
            <input id="rng-curve" type="range" min="50" max="200" step="5" value="100" />
          </div>
          <p class="note">반응성: 포인터가 멀어질 때 속도가 얼마나 빨리 증가할지 (곡선) 조절합니다.</p>
        </section>
        <div data-practice-only class="row end">
          <button id="btn-start-run" class="primary">Start Run ▶</button>
        </div>
        <section>
          <h3>Accessibility</h3>
          <label><input type="checkbox" id="chk-contrast" /> High‑contrast theme</label>
          <p class="note">고대비 테마: 텍스트/UI 대비를 높여 가독성을 올립니다.</p>
          <div class="row">
            <label for="rng-text">Text size</label>
            <input id="rng-text" type="range" min="90" max="150" value="100" />
          </div>
          <p class="note">텍스트 크기: 인터페이스 글자 크기를 키웁니다.</p>
          <label data-advanced><input type="checkbox" id="chk-scan" /> One‑switch scan mode (beta)</label>
          <p class="note" data-advanced>스캔 모드: 선택지가 자동으로 순환하며 스페이스/엔터로 선택합니다.</p>
          <div class="row" data-advanced>
            <label for="rng-scan">Scan speed</label>
            <input id="rng-scan" type="range" min="600" max="2400" step="100" value="1200" />
          </div>
          <label data-advanced><input type="checkbox" id="chk-dwell" /> Dwell to activate</label>
          <p class="note" data-advanced>응시/머무름 활성화: 커서를 올려두면 지정 시간 후 자동 클릭합니다.</p>
          <div class="row" data-advanced>
            <label for="rng-dwell">Dwell time</label>
            <input id="rng-dwell" type="range" min="500" max="2000" step="100" value="900" />
          </div>
          <label data-advanced><input type="checkbox" id="chk-face" /> Face gestures (beta)</label>
          <p class="note" data-advanced>얼굴 제스처: 좌/우/상/하 기울기만으로 1회성 ‘눌러 이동’을 실행합니다.</p>
          <div class="row" data-advanced>
            <label for="rng-tilt">Tilt sensitivity</label>
            <input id="rng-tilt" type="range" min="40" max="100" step="2" value="60" />
          </div>
          <div class="row" data-advanced>
            <label for="rng-nudge">Nudge distance</label>
            <input id="rng-nudge" type="range" min="80" max="320" step="10" value="160" />
          </div>
          <div class="row" data-advanced>
            <label for="rng-repeat">Nudge repeat</label>
            <input id="rng-repeat" type="range" min="200" max="600" step="20" value="300" />
          </div>
          <h4 data-advanced>Telegraph</h4>
          <div class="row" data-advanced>
            <label for="rng-tele">Telegraph duration</label>
            <input id="rng-tele" type="range" min="80" max="400" step="20" value="200" />
          </div>
          <label data-advanced><input type="checkbox" id="chk-telebold" /> Extra contrast telegraph</label>
          <div class="row" data-advanced><label><input type="checkbox" id="chk-shake" /> Screen shake (subtle)</label></div>
          <h4 data-advanced>Visibility</h4>
          <div class="row" data-advanced>
            <label for="sel-palette">Palette</label>
            <select id="sel-palette">
              <option value="default">Default</option>
              <option value="high">High‑visibility</option>
              <option value="mono">Grayscale</option>
            </select>
          </div>
          <label data-advanced><input type="checkbox" id="chk-bulletbold" /> High‑visibility projectiles</label>
        </section>
        <section>
          <h3>Difficulty</h3>
          <div role="radiogroup" aria-label="Difficulty">
            <label><input type="radio" name="difficulty" value="relaxed" /> Relaxed</label>
            <label><input type="radio" name="difficulty" value="standard" checked /> Standard</label>
            <label><input type="radio" name="difficulty" value="intense" /> Intense</label>
          </div>
        </section>
        <div class="row end">
          <button id="btn-close-settings" class="secondary">Close</button>
        </div>
      </div>
    </div>

    <!-- Level Up Overlay (disabled in practice mode) -->
    <div id="levelup-overlay" class="overlay levelup" role="dialog" aria-modal="true" aria-labelledby="lvlup-title" aria-hidden="true">
      <div class="overlay-card">
        <h2 id="lvlup-title">Level Up</h2>
        <p>Choose an upgrade:</p>
        <div id="lvlup-choices" class="choices" role="listbox" aria-label="Upgrades">
          <button role="option" data-choice="1">+20% Attack Rate (1)</button>
          <button role="option" data-choice="2">+1 Projectile (2)</button>
          <button role="option" data-choice="3">+10% Move Speed (3)</button>
        </div>
      </div>
    </div>

    <!-- Run Complete Overlay -->
    <div id="runover-overlay" class="overlay runover" role="dialog" aria-modal="true" aria-labelledby="runover-title" aria-hidden="true">
      <div class="overlay-card">
        <h2 id="runover-title">Run Complete</h2>
        <p id="runover-summary">Summary</p>
        
        <div id="stage-rewards" class="choices" aria-label="Stage rewards" aria-hidden="true">
          <button id="reward-magnet" data-reward="magnet">XP Magnet</button>
          <button id="reward-blast" data-reward="blast">Wide Blast</button>
        </div>
        <div class="row">
          <button id="btn-next-stage" class="primary" data-scan>Next Stage</button>
          <button id="btn-retry" class="secondary" data-scan>Retry</button>
          <button id="btn-menu" class="secondary" data-scan>Menu</button>
        </div>
      </div>
    </div>

    <!-- Pause Overlay -->
    <div id="pause-overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="pause-title" aria-hidden="true">
      <div class="overlay-card">
        <h2 id="pause-title">Paused</h2>
        <div class="row">
          <button id="btn-resume" class="primary" data-scan>Resume</button>
          <button id="btn-quit" class="secondary" data-scan>Quit to Menu</button>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
